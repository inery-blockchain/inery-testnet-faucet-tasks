var e=function(){if("undefined"==typeof self)return!1;if("top"in self&&self!==top)try{top}catch(e){return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1}(),n=e?Promise.resolve().then(function(){return u}):Promise.resolve().then(function(){return P}),t=e?Promise.resolve().then(function(){return d}):Promise.resolve().then(function(){return b}),r=e?Promise.resolve().then(function(){return m}):Promise.resolve().then(function(){return k}),i=function(e){try{return Promise.resolve(e.getFile()).then(function(n){return n.handle=e,n})}catch(e){return Promise.reject(e)}},o=function(e){void 0===e&&(e=[{}]);try{Array.isArray(e)||(e=[e]);var n=[];return e.forEach(function(e,t){n[t]={description:e.description||"Files",accept:{}},e.mimeTypes?e.mimeTypes.map(function(r){n[t].accept[r]=e.extensions||[]}):n[t].accept["*/*"]=e.extensions||[]}),Promise.resolve(window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1})).then(function(n){return Promise.resolve(Promise.all(n.map(i))).then(function(n){return e[0].multiple?n:n[0]})})}catch(e){return Promise.reject(e)}},u={__proto__:null,default:o};function c(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var n=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:n}})}return c=function(e){this.s=e,this.n=e.next},c.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new c(e)}function s(e,n,t){if(!e.s){if(t instanceof a){if(!t.s)return void(t.o=s.bind(null,e,n));1&n&&(n=t.s),t=t.v}if(t&&t.then)return void t.then(s.bind(null,e,n),s.bind(null,e,2));e.s=n,e.v=t;var r=e.o;r&&r(e)}}var l=function e(n,t,r,i){try{var o=function(e){return Promise.resolve(Promise.all(l)).then(function(e){var n=e.flat();return Promise.resolve(Promise.all(h)).then(function(e){return[].concat(n,e)})})};void 0===r&&(r=n.name);var u,l=[],h=[],d=!1,p=!1,m=v(function(){return function(o,u){try{var v=function(){var o,u=function(e){var n,t,r,i=2;for("undefined"!=typeof Symbol&&(t=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(t&&null!=(n=e[t]))return n.call(e);if(r&&null!=(n=e[r]))return new c(n.call(e));t="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(n.values()),v=function(e,n,t){for(var r;;){var i=e();if(f(i)&&(i=i.v),!i)return o;if(i.then){r=0;break}var o=t();if(o&&o.then){if(!f(o)){r=1;break}o=o.s}if(n){var u=n();if(u&&u.then&&!f(u)){r=2;break}}}var c=new a,l=s.bind(null,c,2);return(0===r?i.then(h):1===r?o.then(v):u.then(d)).then(void 0,l),c;function v(r){o=r;do{if(n&&(u=n())&&u.then&&!f(u))return void u.then(d).then(void 0,l);if(!(i=e())||f(i)&&!i.v)return void s(c,1,o);if(i.then)return void i.then(h).then(void 0,l);f(o=t())&&(o=o.v)}while(!o||!o.then);o.then(v).then(void 0,l)}function h(e){e?(o=t())&&o.then?o.then(v).then(void 0,l):v(o):s(c,1,o)}function d(){(i=e())?i.then?i.then(h).then(void 0,l):h(i):s(c,1,o)}}(function(){return Promise.resolve(u.next()).then(function(e){return d=!(o=e).done})},function(){return!!(d=!1)},function(){var u=o.value,c=r+"/"+u.name;"file"===u.kind?h.push(u.getFile().then(function(e){return e.directoryHandle=n,e.handle=u,Object.defineProperty(e,"webkitRelativePath",{configurable:!0,enumerable:!0,get:function(){return c}})})):"directory"!==u.kind||!t||i&&i(u)||l.push(e(u,t,c,i))});if(v&&v.then)return v.then(function(){})}()}catch(e){return u(e)}return v&&v.then?v.then(void 0,u):v}(0,function(e){p=!0,u=e})},function(e,n){function t(t){if(e)throw n;return n}var r=v(function(){var e=function(){if(d&&null!=_iterator.return)return Promise.resolve(_iterator.return()).then(function(){})}();if(e&&e.then)return e.then(function(){})},function(e,n){if(p)throw u;if(e)throw n;return n});return r&&r.then?r.then(t):t()});return Promise.resolve(m&&m.then?m.then(o):o())}catch(e){return Promise.reject(e)}};const a=/*#__PURE__*/function(){function e(){}return e.prototype.then=function(n,t){const r=new e,i=this.s;if(i){const e=1&i?n:t;if(e){try{s(r,1,e(this.v))}catch(e){s(r,2,e)}return r}return this}return this.o=function(e){try{const i=e.v;1&e.s?s(r,1,n?n(i):i):t?s(r,1,t(i)):s(r,2,i)}catch(e){s(r,2,e)}},r},e}();function f(e){return e instanceof a&&1&e.s}function v(e,n){try{var t=e()}catch(e){return n(!0,e)}return t&&t.then?t.then(n.bind(null,!1),n.bind(null,!0)):n(!1,t)}var h=function(e){void 0===e&&(e={});try{return e.recursive=e.recursive||!1,e.mode=e.mode||"read",Promise.resolve(window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode})).then(function(n){return l(n,e.recursive,void 0,e.skipDirectory)})}catch(e){return Promise.reject(e)}},d={__proto__:null,default:h},p=function(e,n,t,r,i){void 0===n&&(n=[{}]),void 0===t&&(t=null),void 0===r&&(r=!1),void 0===i&&(i=null);try{var o=function(r){function o(n){return!t&&i&&i(n),Promise.resolve(n.createWritable()).then(function(t){var r;function i(i){if(r)return i;var o=t.write;return Promise.resolve(e).then(function(e){return Promise.resolve(o.call(t,e)).then(function(){return Promise.resolve(t.close()).then(function(){return n})})})}var o=function(){if("stream"in e){var i=e.stream();return Promise.resolve(i.pipeTo(t)).then(function(){return r=1,n})}return function(){if("body"in e)return Promise.resolve(e.body.pipeTo(t)).then(function(){return r=1,n})}()}();return o&&o.then?o.then(i):i(o)})}return t?o(t):Promise.resolve(window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:u,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1})).then(o)};Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";var u=[],c=null;e instanceof Blob&&e.type?c=e.type:e.headers&&e.headers.get("content-type")&&(c=e.headers.get("content-type")),n.forEach(function(e,n){u[n]={description:e.description||"Files",accept:{}},e.mimeTypes?(0===n&&c&&e.mimeTypes.push(c),e.mimeTypes.map(function(t){u[n].accept[t]=e.extensions||[]})):c?u[n].accept[c]=e.extensions||[]:u[n].accept["*/*"]=e.extensions||[]});var s=function(){if(t)return function(e,n){try{var r=Promise.resolve(t.getFile()).then(function(){})}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(0,function(e){if(t=null,r)throw e})}();return Promise.resolve(s&&s.then?s.then(o):o())}catch(e){return Promise.reject(e)}},m={__proto__:null,default:p},y=function(e){void 0===e&&(e=[{}]);try{return Array.isArray(e)||(e=[e]),Promise.resolve(new Promise(function(n,t){var r=document.createElement("input");r.type="file";var i=[].concat(e.map(function(e){return e.mimeTypes||[]}),e.map(function(e){return e.extensions||[]})).join();r.multiple=e[0].multiple||!1,r.accept=i||"",r.style.display="none",document.body.append(r);var o=function(e){"function"==typeof u&&u(),n(e)},u=e[0].legacySetup&&e[0].legacySetup(o,function(){return u(t)},r),c=function e(){window.removeEventListener("focus",e),r.remove()};r.addEventListener("click",function(){window.addEventListener("focus",c)}),r.addEventListener("change",function(){window.removeEventListener("focus",c),r.remove(),o(r.multiple?Array.from(r.files):r.files[0])}),r.click()}))}catch(e){return Promise.reject(e)}},P={__proto__:null,default:y},w=function(e){void 0===e&&(e=[{}]);try{return Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,Promise.resolve(new Promise(function(n,t){var r=document.createElement("input");r.type="file",r.webkitdirectory=!0;var i=function(e){"function"==typeof o&&o(),n(e)},o=e[0].legacySetup&&e[0].legacySetup(i,function(){return o(t)},r);r.addEventListener("change",function(){var n=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(n=n.filter(function(n){return n.webkitRelativePath.split("/").every(function(n){return!e[0].skipDirectory({name:n,kind:"directory"})})})):n=n.filter(function(e){return 2===e.webkitRelativePath.split("/").length}),i(n)}),r.click()}))}catch(e){return Promise.reject(e)}},b={__proto__:null,default:w},_=function(e,n){void 0===n&&(n={});try{var t=function(){return r.download=n.fileName||"Untitled",Promise.resolve(i).then(function(e){r.href=URL.createObjectURL(e);var t=function(){"function"==typeof i&&i()},i=n.legacySetup&&n.legacySetup(t,function(){return i()},r);return r.addEventListener("click",function(){setTimeout(function(){return URL.revokeObjectURL(r.href)},3e4),t()}),r.click(),null})};Array.isArray(n)&&(n=n[0]);var r=document.createElement("a"),i=e,o=function(){if("body"in e)return Promise.resolve(function(e,n){try{var t=e.getReader(),r=new ReadableStream({start:function(e){return function n(){try{return Promise.resolve(t.read().then(function(t){if(!t.done)return e.enqueue(t.value),n();e.close()}))}catch(e){return Promise.reject(e)}}()}}),i=new Response(r);return Promise.resolve(i.blob()).then(function(e){return t.releaseLock(),new Blob([e],{type:n})})}catch(e){return Promise.reject(e)}}(e.body,e.headers.get("content-type"))).then(function(e){i=e})}();return Promise.resolve(o&&o.then?o.then(t):t())}catch(e){return Promise.reject(e)}},k={__proto__:null,default:_};exports.directoryOpen=function(){try{var e=arguments;return Promise.resolve(t).then(function(n){return n.default.apply(n,[].slice.call(e))})}catch(e){return Promise.reject(e)}},exports.directoryOpenLegacy=w,exports.directoryOpenModern=h,exports.fileOpen=function(){try{var e=arguments;return Promise.resolve(n).then(function(n){return n.default.apply(n,[].slice.call(e))})}catch(e){return Promise.reject(e)}},exports.fileOpenLegacy=y,exports.fileOpenModern=o,exports.fileSave=function(){try{var e=arguments;return Promise.resolve(r).then(function(n){return n.default.apply(n,[].slice.call(e))})}catch(e){return Promise.reject(e)}},exports.fileSaveLegacy=_,exports.fileSaveModern=p,exports.supported=e;
